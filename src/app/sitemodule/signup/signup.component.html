<div class="m-login__signin">
		<div class="m-login__head m-top-login ">
			<h3 class="m-title m-login-title">
				<span> Sign up for an account </span>
			</h3>
		</div>
		<form class="m-login__form m-form" #signupForm="ngForm" novalidate>
			<p>
				<ngb-alert *ngIf="!errorMessageClosed" [type]="'danger'" (close)="errorMessageClosed = true">
					{{errorMessage}}
				</ngb-alert>
			</p>
			<div class="login-form">
				<ng-container *ngIf="!inviteToken">
					<div class="form-group m-form__group row" [ngClass]="{'has-danger': subdomain.invalid && subdomain.dirty, 'has-success': subdomain.valid }">
						<div class="input-group">
							<input class="form-input" #subdomain="ngModel" type="text" name="subdomain" placeholder="Enter Yoursitename"
							 [(ngModel)]="model.subdomain" maxlength="255" id="subdomain" (ngModelChange)="model.subdomain = $event.toLowerCase()" required>
							<span class="input-group-addon site-name">.kumolus.net</span>
						</div>
						<div [hidden]="subdomain.valid || subdomain.pristine"
						*ngIf="subdomain && subdomain.invalid && (subdomain.dirty || subdomain.touched)"
						class="form-control-feedback">
							<div *ngIf="subdomain.errors.required">
								Please enter the sitename.
							</div>
						</div>
					</div>
					<div class="form-group m-form__group row" [ngClass]="{'has-danger': unconfirmed_email.invalid && unconfirmed_email.dirty, 'has-success': unconfirmed_email.valid }">
						<input class="form-input" type="email" placeholder="Enter email" name="unconfirmed_email" email="true"
							[pattern]="emailPattern" [(ngModel)]="model.unconfirmed_email"
							#unconfirmed_email="ngModel" maxlength="50" id="unconfirmed_email" (ngModelChange)="model.unconfirmed_email = $event.toLowerCase()" required>
						<div [hidden]="unconfirmed_email.valid || unconfirmed_email.pristine"
							*ngIf="unconfirmed_email.invalid && (unconfirmed_email.dirty || unconfirmed_email.touched)"
							class="form-control-feedback">
							<div *ngIf="unconfirmed_email.errors.required">
								Please enter the email id.
							</div>
							<div *ngIf="unconfirmed_email.errors.pattern">
								Please enter the correct email id.
							</div>
						</div>
					</div>
				</ng-container>
				<div class="form-group m-form__group row" [ngClass]="{'has-danger': username.invalid && username.dirty, 'has-success': username.valid }">
						<input class="form-input" type="text" placeholder="Enter Username" name="username" [(ngModel)]="model.username"
							#username="ngModel" minlength="3" maxlength="30"  [pattern]="usernamePattern" id="username" (ngModelChange)="model.username = $event.toLowerCase()" required>
						<div [hidden]="username.valid || username.pristine"
							*ngIf="username && username.invalid && (username.dirty || username.touched)"
							class="form-control-feedback">
							<div *ngIf="username.errors.required">
								Please enter the username.
							</div>
							<div *ngIf="username.errors.minlength">
								Username must be at least 3 characters long.
							</div>
							<div *ngIf="username.errors.pattern">
								Username must be alphabetic only.
							</div>
						</div>
				</div>
				<div class="form-group m-form__group row" [ngClass]="{'has-danger': password.invalid && password.dirty, 'has-success': password.valid }">
					<input class="form-input" type="password" placeholder="Enter password" name="password"
						[(ngModel)]="model.password"  #password="ngModel" minlength="8" maxlength="40"
						id="password" required>
					<div [hidden]="password.valid || password.pristine"
						*ngIf="password.invalid && (password.dirty || password.touched)"
						class="form-control-feedback">
						<div *ngIf="password.errors.required">
							Please enter the password.
						</div>
						<div *ngIf="password.errors.minlength">
							Password must be at least 8 characters long.
						</div>
					</div>
				</div>
				<div class="form-group m-form__group row" [ngClass]="{'has-danger': password_confirmation.invalid && password_confirmation.dirty, 'has-success': password_confirmation.valid }">
					<input class="form-input" type="password" placeholder="Enter confirm password" name="password_confirmation"
						[(ngModel)]="model.password_confirmation" #password_confirmation="ngModel"
						minlength="8" id="password_confirmation" required>
					<div [hidden]="(model.password ==model.password_confirmation)  || password_confirmation.pristine" class="form-control-feedback" style="color:#f4516c;">
						Password mismatch
					</div>
				</div>
				<div class="form-group m-form__group row">
					<label class="m-checkbox m-checkbox--focus">
						<input type="checkbox" class="form-input" name="agree"
							[(ngModel)]="model.agree" #agree="ngModel" required> I agree to the
						<a href="https://kumolus.com/terms-conditions"
							class="m-link m-link--focus m-sinup-link">
							Kumolus terms of service.
						</a>
						<span></span>
					</label>
					<span class="m-form__help"></span>
					<div *ngIf="agree.invalid && (agree.dirty || agree.touched)" class="form-control-feedback">
						<div *ngIf="agree.errors.required">
							Please accept the terms of service to proceed.
						</div>
					</div>
					<div class="mandatory-note">
						Note: All fields are mandatory.
					</div>
				</div>
				<div class="m-login__form-action">
					<button class="m-btn-form" type="submit" [disabled]="signupForm.invalid || model.password != model.password_confirmation" [ngClass] = "{'submit-disabled': signupForm.invalid || model.password != model.password_confirmation }"
						(click)="onSubmit(signupForm)">
						Sign Up
					</button>
				</div>
			</div>
		</form>
	</div>
	
	